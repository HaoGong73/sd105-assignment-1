const apiKey="y3HnuYNUAqAbaf7rmLl9",inputForm=document.querySelector("form"),streetsList=document.querySelector(".streets"),stopsSchedule=document.querySelector("tbody"),title=document.querySelector("#street-name"),streetsListHTML=e=>{streetsList.innerHTML="",e.forEach(e=>{streetsList.insertAdjacentHTML("beforeend",`<a href="#" data-street-key="${e.key}"
      >${e.name}</a>`)})},searchStreets=async e=>{let t=e.split(" ");e=t.join("%20");e=`https://api.winnipegtransit.com/v3/streets.json?api-key=${apiKey}&name=${e}&usage=long`;const s=await fetch(e);e=await s.json();if(console.log(e),404===e.status||0===e.streets.length)throw"Street Not Found";return e.streets},getAllStopKeys=async e=>{e=`https://api.winnipegtransit.com/v3/stops.json?api-key=${apiKey}&street=${e}`;console.log(e);const t=await fetch(e);e=await t.json();return console.log(e.stops),e.stops},getStopsSchedule=async e=>{e=`https://api.winnipegtransit.com/v3/stops/${e}/schedule.json?api-key=${apiKey}&max-results-per-route=2`;console.log(e);const t=await fetch(e);e=await t.json();return console.log(e),e},scheduleListHTML=e=>{stopsSchedule.innerHTML="",e.forEach(s=>{s["stop-schedule"]["route-schedules"].forEach(e=>{console.log(e),e["scheduled-stops"].forEach(e=>{console.log(s["stop-schedule"].stop.name),console.log(s["stop-schedule"].stop["cross-street"].name),console.log(s["stop-schedule"].stop.direction),console.log(e.bus.key);let t=new Date(e.times.arrival.scheduled);stopsSchedule.insertAdjacentHTML("beforeend",`<tr>
            <td>${s["stop-schedule"].stop.name}</td>
            <td>${s["stop-schedule"].stop["cross-street"].name}</td>
            <td>${s["stop-schedule"].stop.direction}</td>
            <td>${e.bus.key}</td>
            <td>${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}</td>
          </tr>`)})})})};inputForm.addEventListener("submit",e=>{e.preventDefault(),console.log(e.target[0].value),searchStreets(e.target[0].value).then(e=>streetsListHTML(e)).catch(e=>alert(e)),e.target[0].value=""}),streetsList.addEventListener("click",e=>{console.log(e.target.closest("a").dataset.streetKey),title.innerHTML=`Displaying results for ${e.target.closest("a").innerHTML}`,getAllStopKeys(e.target.closest("a").dataset.streetKey).then(e=>{const t=[];e.map(e=>{t.push(getStopsSchedule(e.key))}),Promise.all(t).then(e=>scheduleListHTML(e))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXBpS2V5ID0gJ3kzSG51WU5VQXFBYmFmN3JtTGw5JztcblxuY29uc3QgaW5wdXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuY29uc3Qgc3RyZWV0c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RyZWV0cycpO1xuY29uc3Qgc3RvcHNTY2hlZHVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG5jb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdHJlZXQtbmFtZScpO1xuXG4vLyAxLiBzdHJlZXQgYXBpXG4vLyBodHRwczovL2FwaS53aW5uaXBlZ3RyYW5zaXQuY29tL3YzL3N0cmVldHMuanNvbj9hcGkta2V5PXkzSG51WU5VQXFBYmFmN3JtTGw5Jm5hbWU9bWFpblxuY29uc3Qgc3RyZWV0c0xpc3RIVE1MID0gKHN0cmVldHMpID0+IHtcbiAgc3RyZWV0c0xpc3QuaW5uZXJIVE1MID0gJyc7XG4gIHN0cmVldHMuZm9yRWFjaChzdHJlZXQgPT4ge1xuICAgIHN0cmVldHNMaXN0Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJyxcbiAgICBgPGEgaHJlZj1cIiNcIiBkYXRhLXN0cmVldC1rZXk9XCIke3N0cmVldC5rZXl9XCJcbiAgICAgID4ke3N0cmVldC5uYW1lfTwvYT5gXG4gICAgKTtcbiAgfSk7XG59XG5cbmNvbnN0IHNlYXJjaFN0cmVldHMgPSBhc3luYyAoc3RyZWV0TmFtZSkgPT4ge1xuICBsZXQgYXJyYXkgPSBzdHJlZXROYW1lLnNwbGl0KCcgJyk7XG4gIHN0cmVldE5hbWUgPSBhcnJheS5qb2luKCclMjAnKTtcbiAgbGV0IHN0cmVldFVSTCA9IGBodHRwczovL2FwaS53aW5uaXBlZ3RyYW5zaXQuY29tL3YzL3N0cmVldHMuanNvbj9hcGkta2V5PSR7YXBpS2V5fSZuYW1lPSR7c3RyZWV0TmFtZX0mdXNhZ2U9bG9uZ2A7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc3RyZWV0VVJMKTsgIFxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuXG4gIGlmIChkYXRhLnN0YXR1cyA9PT0gNDA0IHx8IGRhdGEuc3RyZWV0cy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyAnU3RyZWV0IE5vdCBGb3VuZCc7XG4gIH1cbiAgXG4gIHJldHVybiBkYXRhLnN0cmVldHM7XG59XG5cbi8vIDIuIHN0b3AgYXBpXG4vLyBodHRwczovL2FwaS53aW5uaXBlZ3RyYW5zaXQuY29tL3YzL3N0b3BzLmpzb24/YXBpLWtleT15M0hudVlOVUFxQWJhZjdybUxsOSZzdHJlZXQ9NDQ5OVxuY29uc3QgZ2V0QWxsU3RvcEtleXMgPSBhc3luYyhzdHJlZXRLZXkpID0+IHtcbiAgbGV0IHN0b3BzVVJMID0gYGh0dHBzOi8vYXBpLndpbm5pcGVndHJhbnNpdC5jb20vdjMvc3RvcHMuanNvbj9hcGkta2V5PSR7YXBpS2V5fSZzdHJlZXQ9JHtzdHJlZXRLZXl9YDtcbiAgY29uc29sZS5sb2coc3RvcHNVUkwpO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHN0b3BzVVJMKTsgIFxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gIGNvbnNvbGUubG9nKGRhdGEuc3RvcHMpO1xuICBcbiAgcmV0dXJuIGRhdGEuc3RvcHM7XG59XG5cbi8vIDMuIHN0b3Agc2NoZWR1bGVcbi8vIGh0dHBzOi8vYXBpLndpbm5pcGVndHJhbnNpdC5jb20vdjMvc3RvcHMvNjExNTEvc2NoZWR1bGUuanNvbj9hcGkta2V5PXkzSG51WU5VQXFBYmFmN3JtTGw5XG5cbmNvbnN0IGdldFN0b3BzU2NoZWR1bGUgPSBhc3luYyAoc3RvcHNLZXkpID0+IHtcbiAgbGV0IHN0b3BzU2NoZWR1bGVVUkwgPSBgaHR0cHM6Ly9hcGkud2lubmlwZWd0cmFuc2l0LmNvbS92My9zdG9wcy8ke3N0b3BzS2V5fS9zY2hlZHVsZS5qc29uP2FwaS1rZXk9JHthcGlLZXl9Jm1heC1yZXN1bHRzLXBlci1yb3V0ZT0yYDtcbiAgY29uc29sZS5sb2coc3RvcHNTY2hlZHVsZVVSTCk7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzdG9wc1NjaGVkdWxlVVJMKTsgIFxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuICBcbiAgcmV0dXJuIGRhdGE7XG59XG5cbmNvbnN0IHNjaGVkdWxlTGlzdEhUTUwgPSAoc2NoZWR1bGVzKSA9PiB7XG4gIHN0b3BzU2NoZWR1bGUuaW5uZXJIVE1MID0gJyc7XG4gIFxuICBzY2hlZHVsZXMuZm9yRWFjaCggc2NoZWR1bGUgPT4ge1xuXG5cbiAgICBzY2hlZHVsZVsnc3RvcC1zY2hlZHVsZSddWydyb3V0ZS1zY2hlZHVsZXMnXS5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIGRhdGFbJ3NjaGVkdWxlZC1zdG9wcyddLmZvckVhY2goKHNjaGVkdWxlU3RvcCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhzY2hlZHVsZVsnc3RvcC1zY2hlZHVsZSddLnN0b3AubmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHNjaGVkdWxlWydzdG9wLXNjaGVkdWxlJ10uc3RvcFsnY3Jvc3Mtc3RyZWV0J10ubmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHNjaGVkdWxlWydzdG9wLXNjaGVkdWxlJ10uc3RvcC5kaXJlY3Rpb24pO1xuICAgICAgICBjb25zb2xlLmxvZyhzY2hlZHVsZVN0b3AuYnVzLmtleSk7XG5cbiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShzY2hlZHVsZVN0b3AudGltZXMuYXJyaXZhbC5zY2hlZHVsZWQpO1xuXG4gICAgICAgIHN0b3BzU2NoZWR1bGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLFxuICAgICAgICAgIGA8dHI+XG4gICAgICAgICAgICA8dGQ+JHtzY2hlZHVsZVsnc3RvcC1zY2hlZHVsZSddLnN0b3AubmFtZX08L3RkPlxuICAgICAgICAgICAgPHRkPiR7c2NoZWR1bGVbJ3N0b3Atc2NoZWR1bGUnXS5zdG9wWydjcm9zcy1zdHJlZXQnXS5uYW1lfTwvdGQ+XG4gICAgICAgICAgICA8dGQ+JHtzY2hlZHVsZVsnc3RvcC1zY2hlZHVsZSddLnN0b3AuZGlyZWN0aW9ufTwvdGQ+XG4gICAgICAgICAgICA8dGQ+JHtzY2hlZHVsZVN0b3AuYnVzLmtleX08L3RkPlxuICAgICAgICAgICAgPHRkPiR7ZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9PC90ZD5cbiAgICAgICAgICA8L3RyPmBcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuaW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zb2xlLmxvZyhldmVudC50YXJnZXRbMF0udmFsdWUpO1xuICBzZWFyY2hTdHJlZXRzKGV2ZW50LnRhcmdldFswXS52YWx1ZSlcbiAgLnRoZW4oKGRhdGUpID0+IHtcbiAgICByZXR1cm4gc3RyZWV0c0xpc3RIVE1MKGRhdGUpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gYWxlcnQoZXJyKSk7XG4gIGV2ZW50LnRhcmdldFswXS52YWx1ZSA9ICcnO1xufSlcblxuc3RyZWV0c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2EnKS5kYXRhc2V0LnN0cmVldEtleSk7XG4gIHRpdGxlLmlubmVySFRNTCA9IGBEaXNwbGF5aW5nIHJlc3VsdHMgZm9yICR7ZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2EnKS5pbm5lckhUTUx9YFxuICBnZXRBbGxTdG9wS2V5cyhldmVudC50YXJnZXQuY2xvc2VzdCgnYScpLmRhdGFzZXQuc3RyZWV0S2V5KVxuICAudGhlbigoYWxsU3RvcHMpID0+IHtcbiAgICBjb25zdCBzdG9wUHJvbWlzZXMgPSBbXTtcbiAgICBhbGxTdG9wcy5tYXAoKHN0b3ApID0+IHtcbiAgICAgIHN0b3BQcm9taXNlcy5wdXNoKGdldFN0b3BzU2NoZWR1bGUoc3RvcC5rZXkpKTtcbiAgICB9KTtcbiAgICBQcm9taXNlLmFsbChzdG9wUHJvbWlzZXMpLnRoZW4odmFsdWUgPT4gc2NoZWR1bGVMaXN0SFRNTCh2YWx1ZSkpO1xuICB9KTtcbn0pIl0sIm5hbWVzIjpbImFwaUtleSIsImlucHV0Rm9ybSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0cmVldHNMaXN0Iiwic3RvcHNTY2hlZHVsZSIsInRpdGxlIiwic3RyZWV0c0xpc3RIVE1MIiwiaW5uZXJIVE1MIiwic3RyZWV0cyIsImZvckVhY2giLCJzdHJlZXQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJrZXkiLCJuYW1lIiwic2VhcmNoU3RyZWV0cyIsImFzeW5jIiwic3RyZWV0TmFtZSIsImFycmF5Iiwic3BsaXQiLCJqb2luIiwic3RyZWV0VVJMIiwicmVzcG9uc2UiLCJmZXRjaCIsImRhdGEiLCJqc29uIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsImxlbmd0aCIsImdldEFsbFN0b3BLZXlzIiwic3RyZWV0S2V5Iiwic3RvcHNVUkwiLCJzdG9wcyIsImdldFN0b3BzU2NoZWR1bGUiLCJzdG9wc0tleSIsInN0b3BzU2NoZWR1bGVVUkwiLCJzY2hlZHVsZUxpc3RIVE1MIiwic2NoZWR1bGVzIiwic2NoZWR1bGUiLCJzdG9wIiwiZGlyZWN0aW9uIiwic2NoZWR1bGVTdG9wIiwiYnVzIiwiZGF0ZSIsIkRhdGUiLCJ0aW1lcyIsImFycml2YWwiLCJzY2hlZHVsZWQiLCJnZXRIb3VycyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJnZXRNaW51dGVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJ2YWx1ZSIsInRoZW4iLCJjYXRjaCIsImFsZXJ0IiwiZXJyIiwiY2xvc2VzdCIsImRhdGFzZXQiLCJzdG9wUHJvbWlzZXMiLCJhbGxTdG9wcyIsIm1hcCIsInB1c2giLCJQcm9taXNlIiwiYWxsIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFTLHVCQUVUQyxVQUFZQyxTQUFTQyxjQUFjLFFBQ25DQyxZQUFjRixTQUFTQyxjQUFjLFlBQ3JDRSxjQUFnQkgsU0FBU0MsY0FBYyxTQUN2Q0csTUFBUUosU0FBU0MsY0FBYyxnQkFJL0JJLGdCQUFrQixJQUN0QkgsWUFBWUksVUFBWSxHQUN4QkMsRUFBUUMsUUFBUUMsSUFDZFAsWUFBWVEsbUJBQW1CLDRDQUNDRCxFQUFPRTtTQUNsQ0YsRUFBT0csZUFLVkMsY0FBZ0JDLE1BQU9DLElBQzNCLElBQUlDLEVBQVFELEVBQVdFLE1BQU0sS0FDN0JGLEVBQWFDLEVBQU1FLEtBQUssT0FDcEJDLDZEQUF1RXJCLGVBQWVpQixlQUMxRixNQUFNSyxRQUFpQkMsTUFBTUYsR0FDdkJHLFFBQWFGLEVBQVNHLE9BSTVCLEdBRkFDLFFBQVFDLElBQUlILEdBRVEsTUFBaEJBLEVBQUtJLFFBQTBDLElBQXhCSixFQUFLZixRQUFRb0IsT0FDdEMsS0FBTSxtQkFHUixPQUFPTCxFQUFLZixTQUtScUIsZUFBaUJkLE1BQU1lLElBQ3ZCQywyREFBb0VoQyxpQkFBaUIrQixJQUN6RkwsUUFBUUMsSUFBSUssR0FDWixNQUFNVixRQUFpQkMsTUFBTVMsR0FDdkJSLFFBQWFGLEVBQVNHLE9BSTVCLE9BRkFDLFFBQVFDLElBQUlILEVBQUtTLE9BRVZULEVBQUtTLE9BTVJDLGlCQUFtQmxCLE1BQU9tQixJQUMxQkMsOENBQStERCwyQkFBa0NuQyxpQ0FDckcwQixRQUFRQyxJQUFJUyxHQUVaLE1BQU1kLFFBQWlCQyxNQUFNYSxHQUN2QlosUUFBYUYsRUFBU0csT0FJNUIsT0FGQUMsUUFBUUMsSUFBSUgsR0FFTEEsR0FHSGEsaUJBQW1CLElBQ3ZCaEMsY0FBY0csVUFBWSxHQUUxQjhCLEVBQVU1QixRQUFTNkIsSUFHakJBLEVBQVMsaUJBQWlCLG1CQUFtQjdCLFFBQVEsSUFDbkRnQixRQUFRQyxJQUFJSCxHQUNaQSxFQUFLLG1CQUFtQmQsUUFBUSxJQUM5QmdCLFFBQVFDLElBQUlZLEVBQVMsaUJBQWlCQyxLQUFLMUIsTUFDM0NZLFFBQVFDLElBQUlZLEVBQVMsaUJBQWlCQyxLQUFLLGdCQUFnQjFCLE1BQzNEWSxRQUFRQyxJQUFJWSxFQUFTLGlCQUFpQkMsS0FBS0MsV0FDM0NmLFFBQVFDLElBQUllLEVBQWFDLElBQUk5QixLQUU3QixJQUFJK0IsRUFBTyxJQUFJQyxLQUFLSCxFQUFhSSxNQUFNQyxRQUFRQyxXQUUvQzNDLGNBQWNPLG1CQUFtQjtrQkFFdkIyQixFQUFTLGlCQUFpQkMsS0FBSzFCO2tCQUMvQnlCLEVBQVMsaUJBQWlCQyxLQUFLLGdCQUFnQjFCO2tCQUMvQ3lCLEVBQVMsaUJBQWlCQyxLQUFLQztrQkFDL0JDLEVBQWFDLElBQUk5QjtrQkFDakIrQixFQUFLSyxXQUFXQyxXQUFXQyxTQUFTLEVBQUcsUUFBUVAsRUFBS1EsYUFBYUYsV0FBV0MsU0FBUyxFQUFHO3lCQVExR2xELFVBQVVvRCxpQkFBaUIsU0FBVSxJQUNuQ0MsRUFBTUMsaUJBQ043QixRQUFRQyxJQUFJMkIsRUFBTUUsT0FBTyxHQUFHQyxPQUM1QjFDLGNBQWN1QyxFQUFNRSxPQUFPLEdBQUdDLE9BQzdCQyxLQUFLLEdBQ0duRCxnQkFBZ0JxQyxJQUV4QmUsTUFBTSxHQUFTQyxNQUFNQyxJQUN0QlAsRUFBTUUsT0FBTyxHQUFHQyxNQUFRLEtBRzFCckQsWUFBWWlELGlCQUFpQixRQUFTLElBQ3BDM0IsUUFBUUMsSUFBSTJCLEVBQU1FLE9BQU9NLFFBQVEsS0FBS0MsUUFBUWhDLFdBQzlDekIsTUFBTUUsb0NBQXNDOEMsRUFBTUUsT0FBT00sUUFBUSxLQUFLdEQsWUFDdEVzQixlQUFld0IsRUFBTUUsT0FBT00sUUFBUSxLQUFLQyxRQUFRaEMsV0FDaEQyQixLQUFLLElBQ0osTUFBTU0sRUFBZSxHQUNyQkMsRUFBU0MsSUFBSSxJQUNYRixFQUFhRyxLQUFLakMsaUJBQWlCTSxFQUFLM0IsUUFFMUN1RCxRQUFRQyxJQUFJTCxHQUFjTixLQUFLRCxHQUFTcEIsaUJBQWlCb0IifQ==
